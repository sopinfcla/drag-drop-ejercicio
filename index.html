<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ordena las frases correctamente</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background-color: #f2f7ff;
            padding: 20px;
        }
        h2 {
            color: #2d87f0;
            font-size: 28px;
            font-weight: bold;
        }
        .puntuacion {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .motivacion {
            font-size: 18px;
            font-style: italic;
            color: #555;
            margin: 10px 0;
        }
        .zona-drop {
            min-height: 80px;
            width: 90%;
            padding: 10px;
            margin: 0 auto 20px auto;
            background-color: white;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            border-radius: 12px;
            border: 2px dashed #2d87f0;
            background-image: linear-gradient(transparent 24px, #ddd 25px), 
                              linear-gradient(to right, transparent 24px, #ddd 25px);
            background-size: 25px 25px;
        }
        .palabra {
            display: inline-block;
            padding: 8px 12px;
            margin: 5px;
            background-color: #2d87f0;
            color: white;
            border-radius: 20px;
            cursor: pointer;
            user-select: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .palabra:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .palabra.arrastrando {
            opacity: 0.5;
        }
        .palabra.correcta {
            background-color: #4CAF50;
        }
        .palabra.incorrecta {
            background-color: #f44336;
        }
        /* Colores para las palabras en la zona de destino */
        .palabra-colocada-1 {
            background-color: #FF5722; /* Naranja */
        }
        .palabra-colocada-2 {
            background-color: #9C27B0; /* P√∫rpura */
        }
        .palabra-colocada-3 {
            background-color: #3F51B5; /* √çndigo */
        }
        .palabra-colocada-4 {
            background-color: #009688; /* Verde azulado */
        }
        .palabra-colocada-5 {
            background-color: #FF9800; /* √Åmbar */
        }
        .palabra-colocada-6 {
            background-color: #795548; /* Marr√≥n */
        }
        .palabra-colocada-7 {
            background-color: #607D8B; /* Azul gris√°ceo */
        }
        .palabra-colocada-8 {
            background-color: #E91E63; /* Rosa */
        }
        .frases-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .frase {
            margin-bottom: 30px;
            width: 100%;
        }
        .palabras-desordenadas {
            min-height: 60px;
            padding: 10px;
            background-color: rgba(45, 135, 240, 0.1);
            border-radius: 12px;
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            background-color: #2d87f0;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #1a76d2;
        }
        .instruccion {
            color: #555;
            font-style: italic;
            margin-bottom: 10px;
        }
        .resultado {
            font-size: 18px;
            font-weight: bold;
            margin: 10px 0;
            padding: 10px;
            border-radius: 10px;
            display: none;
        }
        .correcto {
            background-color: rgba(76, 175, 80, 0.2);
            color: #2e7d32;
        }
        .incorrecto {
            background-color: rgba(244, 67, 54, 0.2);
            color: #c62828;
        }
        .inicio {
            max-width: 400px;
            margin: 30px auto;
            padding: 20px;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        input[type="text"] {
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 20px;
            font-size: 16px;
            outline: none;
            width: 200px;
            margin-right: 10px;
        }
        input[type="text"]:focus {
            border-color: #2d87f0;
        }
        .nivel {
            margin-top: 10px;
            display: none;
        }
        .nivel-label {
            margin-right: 10px;
            font-weight: bold;
        }
        .nivel-btn {
            padding: 8px 15px;
            margin: 0 5px;
            background-color: #e0e0e0;
            color: #333;
            border: none;
            border-radius: 15px;
            cursor: pointer;
        }
        .nivel-btn.seleccionado {
            background-color: #2d87f0;
            color: white;
        }
        .nivel-descripcion {
            margin-top: 5px;
            font-size: 14px;
            color: #666;
        }
        .progreso {
            width: 100%;
            height: 10px;
            background-color: #ddd;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }
        .barra-progreso {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <h2>Ordena todas las frases correctamente</h2>
    <div class="inicio" id="pantalla-inicio">
        <div>
            <label for="nombre">Tu Nombre:</label>
            <input type="text" id="nombre" placeholder="Escribe tu nombre">
        </div>
        <div class="nivel">
            <span class="nivel-label">Nivel:</span>
            <button class="nivel-btn seleccionado" data-nivel="facil">F√°cil</button>
            <button class="nivel-btn" data-nivel=
        <button onclick="iniciarJuego()">¬°Comenzar!</button>
    </div>

    <div class="puntuacion" style="display: none;">
        <div class="progreso">
            <div class="barra-progreso" id="barra-progreso"></div>
        </div>
        Puntos: <span id="puntos">0</span> / <span id="total-frases">0</span>
        <div id="motivacion" class="motivacion"></div>
    </div>

    <div id="frases-container" class="frases-container" style="display: none;"></div>
    
    <div style="display: none;">
        <button onclick="verificarTodas()">‚úÖ Verificar todas</button>
        <button onclick="nuevaRonda()">üîÑ Nueva Ronda</button>
    </div>

    <script>
        // Variables globales
        let frases = [];
        let frasesMotivadoras = [];
        let jugador = "";
        let puntuacion = 0;
        let tiempoRestante = 60;
        let temporizador;
        let nivelActual = "facil";
        let totalFrasesNivel = {
            "facil": 3,
            "medio": 5,
            "dificil": 7
        };

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            // Mostrar los botones de nivel al cargar la p√°gina
            document.querySelector('.nivel').style.display = "block";
            
            // Configurar los botones de nivel
            document.querySelectorAll('.nivel-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Quitar la clase seleccionado de todos los botones
                    document.querySelectorAll('.nivel-btn').forEach(b => b.classList.remove('seleccionado'));
                    // Agregar la clase seleccionado al bot√≥n clickeado
                    this.classList.add('seleccionado');
                    // Actualizar nivel actual
                    nivelActual = this.getAttribute('data-nivel');
                });
            });
        });

        // Funci√≥n para iniciar el juego
        function iniciarJuego() {
            jugador = document.getElementById("nombre").value.trim();
            if (!jugador) jugador = "Jugador";
            
            // Ocultar pantalla de inicio
            document.getElementById("pantalla-inicio").style.display = "none";
            
            // Mostrar elementos del juego
            document.querySelector(".puntuacion").style.display = "block";
            document.getElementById("frases-container").style.display = "block";
            document.querySelector("div[style='display: none;']").style.display = "block";
            
            // Cargar datos necesarios
            cargarFrasesMotivadoras();
            cargarFrases();
            
            // Iniciar temporizador
            iniciarTemporizador();
        }
        
        // Funci√≥n para cargar frases motivadoras
        async function cargarFrasesMotivadoras() {
            try {
                // Simular carga desde archivo para compatibilidad
                frasesMotivadoras = [
                    "¬°Nunca te rindas! Mickey Mouse dice que la magia est√° en ti. üê≠‚ú®",
                    "¬°Sigue adelante! Elsa te recuerda que 'El fr√≠o nunca te molest√≥'. ‚ùÑÔ∏èüëë",
                    "¬°Hulk dice que eres incre√≠blemente fuerte! üí™üî•",
                    "¬°Spiderman cree que tienes reflejos de h√©roe! üï∑Ô∏èü¶∏‚Äç‚ôÇÔ∏è",
                    "¬°Bluey quiere jugar contigo para celebrar tu esfuerzo! üê∂üíô",
                    "¬°Eres un campe√≥n! Capit√°n Am√©rica te saluda. üá∫üá∏ü¶∏‚Äç‚ôÇÔ∏è",
                    "¬°Tu cerebro brilla como la estrella de la Bella y la Bestia! üåüüìñ",
                    "¬°Buzz Lightyear te dice: 'Al infinito y m√°s all√°'! üöÄ",
                    "¬°Sigue as√≠! Olaf te da un abrazo calentito. ‚õÑüíô",
                    "¬°Harry Potter te anima a seguir aprendiendo! üìñüßô‚Äç‚ôÇÔ∏è"
                ];
                
                mostrarFraseMotivadora();
            } catch (error) {
                console.error("Error al cargar las frases motivadoras:", error);
                frasesMotivadoras = [
                    "¬°Sigue as√≠, vas muy bien!",
                    "¬°Conf√≠a en ti, puedes lograrlo!",
                    "¬°Cada intento te acerca m√°s al √©xito!"
                ];
                mostrarFraseMotivadora();
            }
        }
        
        // Funci√≥n para mostrar una frase motivadora aleatoria
        function mostrarFraseMotivadora() {
            if (frasesMotivadoras.length === 0) return;
            
            let frase = frasesMotivadoras[Math.floor(Math.random() * frasesMotivadoras.length)];
            // Reemplazar {jugador} con el nombre del jugador
            frase = frase.replace("{jugador}", jugador);
            
            document.getElementById("motivacion").textContent = frase;
        }
        
        // Funci√≥n para cargar las frases a ordenar
        async function cargarFrases() {
            try {
                // Simulamos la carga de frases desde el archivo
                const ejemploFrases = [
                    {
                        "palabras": ["Los", "dinosaurios", "vivieron", "hace", "millones", "de", "a√±os"],
                        "orden_correcto": ["Los", "dinosaurios", "vivieron", "hace", "millones", "de", "a√±os"]
                    },
                    {
                        "palabras": ["Bingo", "y", "Bluey", "juegan", "con", "su", "pap√°"],
                        "orden_correcto": ["Bingo", "y", "Bluey", "juegan", "con", "su", "pap√°"]
                    },
                    {
                        "palabras": ["En", "Segovia", "hace", "fr√≠o", "y", "nieva", "en", "invierno"],
                        "orden_correcto": ["En", "Segovia", "hace", "fr√≠o", "y", "nieva", "en", "invierno"]
                    },
                    {
                        "palabras": ["La", "Sagrada", "Familia", "est√°", "en", "Barcelona"],
                        "orden_correcto": ["La", "Sagrada", "Familia", "est√°", "en", "Barcelona"]
                    },
                    {
                        "palabras": ["Los", "coches", "circulan", "por", "la", "carretera"],
                        "orden_correcto": ["Los", "coches", "circulan", "por", "la", "carretera"]
                    },
                    {
                        "palabras": ["Las", "ardillas", "comen", "bellotas", "en", "el", "bosque"],
                        "orden_correcto": ["Las", "ardillas", "comen", "bellotas", "en", "el", "bosque"]
                    },
                    {
                        "palabras": ["Los", "castillos", "tienen", "torres", "y", "murallas"],
                        "orden_correcto": ["Los", "castillos", "tienen", "torres", "y", "murallas"]
                    },
                    {
                        "palabras": ["Los", "superh√©roes", "de", "Marvel", "luchan", "contra", "el", "mal"],
                        "orden_correcto": ["Los", "superh√©roes", "de", "Marvel", "luchan", "contra", "el", "mal"]
                    },
                    {
                        "palabras": ["Los", "ping√ºinos", "viven", "en", "el", "Polo", "Sur"],
                        "orden_correcto": ["Los", "ping√ºinos", "viven", "en", "el", "Polo", "Sur"]
                    },
                    {
                        "palabras": ["Los", "unicornios", "son", "m√°gicos", "y", "tienen", "un", "cuerno"],
                        "orden_correcto": ["Los", "unicornios", "son", "m√°gicos", "y", "tienen", "un", "cuerno"]
                    }
                ];
                
                frases = ejemploFrases;
                generarFrases();
            } catch (error) {
                console.error("Error al cargar las frases:", error);
                alert("Hubo un error al cargar las frases. Por favor, recarga la p√°gina.");
            }
        }
        
        // Funci√≥n para generar las frases en el DOM
        function generarFrases() {
            const contenedor = document.getElementById("frases-container");
            contenedor.innerHTML = "";
            
            // Seleccionamos un n√∫mero de frases seg√∫n el nivel
            const frasesAleatorias = obtenerFrasesAleatorias(frases, totalFrasesNivel[nivelActual]);
            
            // Para cada frase, creamos su contenedor y elementos
            frasesAleatorias.forEach((frase, index) => {
                const fraseDiv = document.createElement("div");
                fraseDiv.className = "frase";
                fraseDiv.id = `frase-${index}`;
                fraseDiv.innerHTML = `
                    <div class="instruccion">Ordena esta frase:</div>
                    <div class="zona-drop" id="zona-drop-${index}" data-index="${index}"></div>
                    <div class="palabras-desordenadas" id="palabras-${index}"></div>
                    <div class="resultado" id="resultado-${index}"></div>
                `;
                contenedor.appendChild(fraseDiv);
                
                // Crear palabras desordenadas
                const palabrasDesordenadas = [...frase.palabras];
                mezclarArray(palabrasDesordenadas);
                
                const palabrasContainer = document.getElementById(`palabras-${index}`);
                palabrasDesordenadas.forEach((palabra, i) => {
                    const palabraSpan = document.createElement("div");
                    palabraSpan.className = "palabra";
                    palabraSpan.textContent = palabra;
                    palabraSpan.draggable = true;
                    palabraSpan.dataset.index = index;
                    palabraSpan.dataset.palabra = palabra;
                    palabraSpan.addEventListener("dragstart", dragStart);
                    palabraSpan.addEventListener("dragend", dragEnd);
                    palabraSpan.addEventListener("click", clickPalabra);
                    palabrasContainer.appendChild(palabraSpan);
                });
                
                // Configurar la zona de destino
                const zonaDestino = document.getElementById(`zona-drop-${index}`);
                zonaDestino.addEventListener("dragover", dragOver);
                zonaDestino.addEventListener("dragenter", dragEnter);
                zonaDestino.addEventListener("dragleave", dragLeave);
                zonaDestino.addEventListener("drop", drop);
                zonaDestino.addEventListener("click", clickZonaDestino);
            });
        }
        
        // Funci√≥n para iniciar el temporizador
        function iniciarTemporizador() {
            tiempoRestante = 60; // 60 segundos (1 minuto)
            actualizarTiempoEnPantalla();
            
            temporizador = setInterval(() => {
                tiempoRestante--;
                actualizarTiempoEnPantalla();
                
                if (tiempoRestante <= 0) {
                    clearInterval(temporizador);
                    finalizarJuego();
                }
            }, 1000);
        }
        
        // Funci√≥n para actualizar el tiempo en pantalla
        function actualizarTiempoEnPantalla() {
            document.getElementById("tiempo").textContent = tiempoRestante;
        }
        
        // Funci√≥n para finalizar el juego
        function finalizarJuego() {
            // Detener el temporizador si est√° activo
            if (temporizador) {
                clearInterval(temporizador);
            }
            
            // Verificar todas las frases autom√°ticamente
            verificarTodas();
            
            // Mostrar mensaje final seg√∫n puntuaci√≥n
            let mensaje = "";
            if (puntuacion >= totalFrasesNivel[nivelActual]) {
                mensaje = `¬°Felicidades ${jugador}! Has completado todas las frases correctamente. ¬°Eres genial!`;
            } else if (puntuacion > 0) {
                mensaje = `¬°Buen intento ${jugador}! Has ordenado ${puntuacion} frases correctamente. ¬°Sigue practicando!`;
            } else {
                mensaje = `¬°√Ånimo ${jugador}! No has podido ordenar las frases esta vez, pero puedes intentarlo de nuevo.`;
            }
            
            // Mostrar mensaje en un alert
            setTimeout(() => {
                alert(mensaje);
                // Preguntar si quiere jugar otra ronda
                if (confirm("¬øQuieres jugar otra ronda?")) {
                    nuevaRonda();
                }
            }, 500);
        }
        
        // Funci√≥n para obtener frases aleatorias del array
        function obtenerFrasesAleatorias(array, cantidad) {
            const arrayCopia = [...array];
            mezclarArray(arrayCopia);
            return arrayCopia.slice(0, cantidad);
        }
        
        // Funci√≥n para mezclar un array
        function mezclarArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // Funci√≥n para verificar si una frase est√° en el orden correcto
        function verificarFrase(index) {
            const zonaDropId = `zona-drop-${index}`;
            const zonaDropElement = document.getElementById(zonaDropId);
            const palabrasEnZona = Array.from(zonaDropElement.children).map(el => el.textContent);
            
            const ordenCorrecto = frases[index].orden_correcto;
            
            // Verificar si hay la misma cantidad de palabras
            if (palabrasEnZona.length !== ordenCorrecto.length) {
                return false;
            }
            
            // Verificar si est√°n en el orden correcto
            for (let i = 0; i < ordenCorrecto.length; i++) {
                if (palabrasEnZona[i] !== ordenCorrecto[i]) {
                    return false;
                }
            }
            
            return true;
        }
        
        // Funci√≥n para verificar todas las frases
        function verificarTodas() {
            puntuacion = 0;
            
            // Para cada frase en el contenedor
            for (let i = 0; i < totalFrasesNivel[nivelActual]; i++) {
                const esCorrecta = verificarFrase(i);
                const resultadoElement = document.getElementById(`resultado-${i}`);
                resultadoElement.style.display = "block";
                
                if (esCorrecta) {
                    resultadoElement.textContent = "¬°Correcto!";
                    resultadoElement.className = "resultado correcto";
                    puntuacion++;
                    
                    // Marcar las palabras como correctas
                    const zonaDrop = document.getElementById(`zona-drop-${i}`);
                    Array.from(zonaDrop.children).forEach(palabra => {
                        palabra.classList.add("correcta");
                    });
                } else {
                    resultadoElement.textContent = "¬°Incorrecto! Sigue intentando.";
                    resultadoElement.className = "resultado incorrecto";
                    
                    // Marcar las palabras incorrectas
                    const zonaDrop = document.getElementById(`zona-drop-${i}`);
                    Array.from(zonaDrop.children).forEach((palabra, idx) => {
                        if (palabra.textContent !== frases[i].orden_correcto[idx]) {
                            palabra.classList.add("incorrecta");
                        } else {
                            palabra.classList.add("correcta");
                        }
                    });
                }
            }
            
            // Actualizar puntuaci√≥n
            document.getElementById("puntos").textContent = puntuacion;
            
            // Mostrar nueva frase motivadora
            mostrarFraseMotivadora();
        }
        
        // Funci√≥n para iniciar una nueva ronda
        function nuevaRonda() {
            // Reiniciar puntuaci√≥n
            puntuacion = 0;
            document.getElementById("puntos").textContent = puntuacion;
            
            // Borrar resultados previos
            document.querySelectorAll(".resultado").forEach(el => {
                el.style.display = "none";
                el.textContent = "";
            });
            
            // Generar nuevas frases
            generarFrases();
            
            // Reiniciar temporizador
            if (temporizador) {
                clearInterval(temporizador);
            }
            iniciarTemporizador();
            
            // Mostrar nueva frase motivadora
            mostrarFraseMotivadora();
        }
        
        // Funciones para drag and drop
        let palabraArrastrada = null;
        
        function dragStart(e) {
            this.classList.add("arrastrando");
            palabraArrastrada = this;
            e.dataTransfer.setData("text/plain", ""); // Necesario para Firefox
        }
        
        function dragEnd() {
            this.classList.remove("arrastrando");
        }
        
        function dragOver(e) {
            e.preventDefault();
        }
        
        function dragEnter(e) {
            e.preventDefault();
            this.style.backgroundColor = "#f0f8ff";
        }
        
        function dragLeave() {
            this.style.backgroundColor = "white";
        }
        
        function drop(e) {
            e.preventDefault();
            this.style.backgroundColor = "white";
            
            if (palabraArrastrada) {
                // Si la palabra ya estaba en una zona drop, la movemos
                if (palabraArrastrada.parentElement.classList.contains("zona-drop")) {
                    this.appendChild(palabraArrastrada);
                } else {
                    // Crear un clon de la palabra y a√±adirlo a la zona drop
                    const clonPalabra = palabraArrastrada.cloneNode(true);
                    clonPalabra.addEventListener("click", clickPalabraEnZona);
                    this.appendChild(clonPalabra);
                    
                    // Ocultar la palabra original
                    palabraArrastrada.style.display = "none";
                }
                
                palabraArrastrada = null;
            }
        }
        
        // Funciones para el manejo de clicks (para dispositivos m√≥viles)
        function clickPalabra() {
            const fraseIndex = this.dataset.index;
            const zonaDestino = document.getElementById(`zona-drop-${fraseIndex}`);
            
            // Crear un clon de la palabra y a√±adirlo a la zona drop
            const clonPalabra = this.cloneNode(true);
            clonPalabra.addEventListener("click", clickPalabraEnZona);
            zonaDestino.appendChild(clonPalabra);
            
            // Ocultar la palabra original
            this.style.display = "none";
        }
        
        function clickPalabraEnZona() {
            // Al hacer click en una palabra dentro de la zona drop, la devolvemos
            const fraseIndex = this.dataset.index;
            const palabrasOriginales = document.getElementById(`palabras-${fraseIndex}`);
            
            // Buscar la palabra original y mostrarla
            Array.from(palabrasOriginales.children).forEach(palabra => {
                if (palabra.textContent === this.textContent && palabra.style.display === "none") {
                    palabra.style.display = "inline-block";
                }
            });
            
            // Eliminar el clon de la zona drop
            this.remove();
        }
        
        function clickZonaDestino() {
            // Esta funci√≥n se puede utilizar si queremos alguna acci√≥n al
            // hacer click en la zona de destino
        }
    </script>
</body>
</html>
