<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ordena las palabras correctamente</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .contenedor {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .palabra {
            padding: 10px;
            margin: 5px;
            background-color: lightgray;
            border: 1px solid #000;
            cursor: grab;
            display: inline-block;
        }
        .zona-drop {
            min-height: 50px;
            width: 80%;
            margin: auto;
            border: 2px dashed #000;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .correcto {
            background-color: lightgreen;
        }
        .incorrecto {
            background-color: lightcoral;
        }
    </style>
</head>
<body>

    <h2>Ordena las palabras correctamente</h2>

    <div id="zona-palabras" class="contenedor"></div>
    <div id="zona-drop" class="zona-drop"></div>

    <button onclick="verificarOrden()">Verificar</button>
    <button onclick="reiniciar()">Reiniciar</button>

    <script>
        let frases = [];
        let ordenCorrecto = [];
        const urlJson = "frases.json"; // URL relativa al JSON en GitHub

        async function cargarFrases() {
            try {
                let response = await fetch(urlJson);
                if (!response.ok) throw new Error(`Error al cargar JSON: ${response.status}`);

                let data = await response.json();
                if (!data.frases || data.frases.length === 0) {
                    throw new Error("El JSON no contiene frases v치lidas.");
                }
                
                frases = data.frases; 
                iniciarEjercicio();
            } catch (error) {
                console.error("Error al cargar las frases:", error);
            }
        }

        function iniciarEjercicio() {
            const zonaPalabras = document.getElementById("zona-palabras");
            const zonaDrop = document.getElementById("zona-drop");

            zonaPalabras.innerHTML = "";
            zonaDrop.innerHTML = "";

            if (frases.length === 0) {
                console.error("No hay frases disponibles.");
                return;
            }

            // Selecciona una frase aleatoria
            let fraseSeleccionada = frases[Math.floor(Math.random() * frases.length)];
            let palabrasDesordenadas = [...fraseSeleccionada.palabras].sort(() => Math.random() - 0.5);
            ordenCorrecto = fraseSeleccionada.orden_correcto;

            // Crea palabras arrastrables
            palabrasDesordenadas.forEach((palabra) => {
                let span = document.createElement("span");
                span.classList.add("palabra");
                span.textContent = palabra;
                span.draggable = true;

                span.addEventListener("dragstart", (e) => {
                    e.dataTransfer.setData("text", e.target.textContent);
                    e.target.classList.add("arrastrando");
                });

                span.addEventListener("dragend", (e) => {
                    e.target.classList.remove("arrastrando");
                });

                zonaPalabras.appendChild(span);
            });

            // Configuraci칩n de la zona de drop
            zonaDrop.addEventListener("dragover", (e) => {
                e.preventDefault();
            });

            zonaDrop.addEventListener("drop", (e) => {
                e.preventDefault();
                
                let texto = e.dataTransfer.getData("text");
                let palabrasEnZona = zonaDrop.children.length;

                // Evitar que se a침adan m치s palabras de las necesarias
                if (palabrasEnZona < ordenCorrecto.length) {
                    let span = document.createElement("span");
                    span.classList.add("palabra");
                    span.textContent = texto;
                    zonaDrop.appendChild(span);
                }
            });
        }

        function verificarOrden() {
            const palabrasEnZona = Array.from(document.getElementById("zona-drop").children).map(el => el.textContent);
            
            if (JSON.stringify(palabrasEnZona) === JSON.stringify(ordenCorrecto)) {
                document.getElementById("zona-drop").classList.add("correcto");
                document.getElementById("zona-drop").classList.remove("incorrecto");
            } else {
                document.getElementById("zona-drop").classList.add("incorrecto");
                document.getElementById("zona-drop").classList.remove("correcto");
            }
        }

        function reiniciar() {
            document.getElementById("zona-drop").classList.remove("correcto", "incorrecto");
            iniciarEjercicio();
        }

        cargarFrases();
    </script>

</body>
</html>
